{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":73,"index":120}}],"key":"wXMcIJWUD66R6uBdlKglbjBdJPs="}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":121},"end":{"line":5,"column":69,"index":190}}],"key":"jk0qVIUl5f0mZv0RFSM44Eb40Bo="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shouldPreventRemove = void 0;\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[0], \"react\"));\n  var _NavigationBuilderContext = _$$_REQUIRE(_dependencyMap[1], \"./NavigationBuilderContext.js\");\n  var _NavigationRouteContext = _$$_REQUIRE(_dependencyMap[2], \"./NavigationRouteContext.js\");\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = function (emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys =\n    // @ts-expect-error: add this property to mark that we've already emitted this action\n    action[VISITED_ROUTE_KEYS] ?? new Set();\n    var beforeRemoveAction = {\n      ...action,\n      [VISITED_ROUTE_KEYS]: visitedRouteKeys\n    };\n    for (var route of removedRoutes) {\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = beforeRemoveListeners[route.key]?.(beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  exports.shouldPreventRemove = shouldPreventRemove;\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContext.NavigationRouteContext);\n    var routeKey = route?.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener?.('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":74,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"shouldPreventRemove"],[7,29,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"useOnPreventRemove"],[8,28,1,13],[8,31,1,13,"useOnPreventRemove"],[8,49,1,13],[9,2,3,0],[9,6,3,0,"React"],[9,11,3,0],[9,14,3,0,"_interopRequireWildcard"],[9,37,3,0],[9,38,3,0,"_$$_REQUIRE"],[9,49,3,0],[9,50,3,0,"_dependencyMap"],[9,64,3,0],[10,2,4,0],[10,6,4,0,"_NavigationBuilderContext"],[10,31,4,0],[10,34,4,0,"_$$_REQUIRE"],[10,45,4,0],[10,46,4,0,"_dependencyMap"],[10,60,4,0],[11,2,5,0],[11,6,5,0,"_NavigationRouteContext"],[11,29,5,0],[11,32,5,0,"_$$_REQUIRE"],[11,43,5,0],[11,44,5,0,"_dependencyMap"],[11,58,5,0],[12,2,5,69],[12,11,5,69,"_interopRequireWildcard"],[12,35,5,69,"e"],[12,36,5,69],[12,38,5,69,"t"],[12,39,5,69],[12,68,5,69,"WeakMap"],[12,75,5,69],[12,81,5,69,"r"],[12,82,5,69],[12,89,5,69,"WeakMap"],[12,96,5,69],[12,100,5,69,"n"],[12,101,5,69],[12,108,5,69,"WeakMap"],[12,115,5,69],[12,127,5,69,"_interopRequireWildcard"],[12,150,5,69],[12,162,5,69,"_interopRequireWildcard"],[12,163,5,69,"e"],[12,164,5,69],[12,166,5,69,"t"],[12,167,5,69],[12,176,5,69,"t"],[12,177,5,69],[12,181,5,69,"e"],[12,182,5,69],[12,186,5,69,"e"],[12,187,5,69],[12,188,5,69,"__esModule"],[12,198,5,69],[12,207,5,69,"e"],[12,208,5,69],[12,214,5,69,"o"],[12,215,5,69],[12,217,5,69,"i"],[12,218,5,69],[12,220,5,69,"f"],[12,221,5,69],[12,226,5,69,"__proto__"],[12,235,5,69],[12,243,5,69,"default"],[12,250,5,69],[12,252,5,69,"e"],[12,253,5,69],[12,270,5,69,"e"],[12,271,5,69],[12,294,5,69,"e"],[12,295,5,69],[12,320,5,69,"e"],[12,321,5,69],[12,330,5,69,"f"],[12,331,5,69],[12,337,5,69,"o"],[12,338,5,69],[12,341,5,69,"t"],[12,342,5,69],[12,345,5,69,"n"],[12,346,5,69],[12,349,5,69,"r"],[12,350,5,69],[12,358,5,69,"o"],[12,359,5,69],[12,360,5,69,"has"],[12,363,5,69],[12,364,5,69,"e"],[12,365,5,69],[12,375,5,69,"o"],[12,376,5,69],[12,377,5,69,"get"],[12,380,5,69],[12,381,5,69,"e"],[12,382,5,69],[12,385,5,69,"o"],[12,386,5,69],[12,387,5,69,"set"],[12,390,5,69],[12,391,5,69,"e"],[12,392,5,69],[12,394,5,69,"f"],[12,395,5,69],[12,409,5,69,"_t"],[12,411,5,69],[12,415,5,69,"e"],[12,416,5,69],[12,432,5,69,"_t"],[12,434,5,69],[12,441,5,69,"hasOwnProperty"],[12,455,5,69],[12,456,5,69,"call"],[12,460,5,69],[12,461,5,69,"e"],[12,462,5,69],[12,464,5,69,"_t"],[12,466,5,69],[12,473,5,69,"i"],[12,474,5,69],[12,478,5,69,"o"],[12,479,5,69],[12,482,5,69,"Object"],[12,488,5,69],[12,489,5,69,"defineProperty"],[12,503,5,69],[12,508,5,69,"Object"],[12,514,5,69],[12,515,5,69,"getOwnPropertyDescriptor"],[12,539,5,69],[12,540,5,69,"e"],[12,541,5,69],[12,543,5,69,"_t"],[12,545,5,69],[12,552,5,69,"i"],[12,553,5,69],[12,554,5,69,"get"],[12,557,5,69],[12,561,5,69,"i"],[12,562,5,69],[12,563,5,69,"set"],[12,566,5,69],[12,570,5,69,"o"],[12,571,5,69],[12,572,5,69,"f"],[12,573,5,69],[12,575,5,69,"_t"],[12,577,5,69],[12,579,5,69,"i"],[12,580,5,69],[12,584,5,69,"f"],[12,585,5,69],[12,586,5,69,"_t"],[12,588,5,69],[12,592,5,69,"e"],[12,593,5,69],[12,594,5,69,"_t"],[12,596,5,69],[12,607,5,69,"f"],[12,608,5,69],[12,613,5,69,"e"],[12,614,5,69],[12,616,5,69,"t"],[12,617,5,69],[13,2,6,0],[13,6,6,6,"VISITED_ROUTE_KEYS"],[13,24,6,24],[13,27,6,27,"Symbol"],[13,33,6,33],[13,34,6,34],[13,54,6,54],[13,55,6,55],[14,2,7,7],[14,6,7,13,"shouldPreventRemove"],[14,25,7,32],[14,28,7,35],[14,37,7,35,"shouldPreventRemove"],[14,38,7,36,"emitter"],[14,45,7,43],[14,47,7,45,"beforeRemoveListeners"],[14,68,7,66],[14,70,7,68,"currentRoutes"],[14,83,7,81],[14,85,7,83,"nextRoutes"],[14,95,7,93],[14,97,7,95,"action"],[14,103,7,101],[14,105,7,106],[15,4,8,2],[15,8,8,8,"nextRouteKeys"],[15,21,8,21],[15,24,8,24,"nextRoutes"],[15,34,8,34],[15,35,8,35,"map"],[15,38,8,38],[15,39,8,39],[15,49,8,39,"route"],[15,54,8,44],[16,6,8,44],[16,13,8,48,"route"],[16,18,8,53],[16,19,8,54,"key"],[16,22,8,57],[17,4,8,57],[17,6,8,58],[19,4,10,2],[20,4,11,2],[20,8,11,8,"removedRoutes"],[20,21,11,21],[20,24,11,24,"currentRoutes"],[20,37,11,37],[20,38,11,38,"filter"],[20,44,11,44],[20,45,11,45],[20,55,11,45,"route"],[20,60,11,50],[21,6,11,50],[21,13,11,54],[21,14,11,55,"nextRouteKeys"],[21,27,11,68],[21,28,11,69,"includes"],[21,36,11,77],[21,37,11,78,"route"],[21,42,11,83],[21,43,11,84,"key"],[21,46,11,87],[21,47,11,88],[22,4,11,88],[22,6,11,89],[22,7,11,90,"reverse"],[22,14,11,97],[22,15,11,98],[22,16,11,99],[23,4,12,2],[23,8,12,8,"visitedRouteKeys"],[23,24,12,24],[24,4,13,2],[25,4,14,2,"action"],[25,10,14,8],[25,11,14,9,"VISITED_ROUTE_KEYS"],[25,29,14,27],[25,30,14,28],[25,34,14,32],[25,38,14,36,"Set"],[25,41,14,39],[25,42,14,40],[25,43,14,41],[26,4,15,2],[26,8,15,8,"beforeRemoveAction"],[26,26,15,26],[26,29,15,29],[27,6,16,4],[27,9,16,7,"action"],[27,15,16,13],[28,6,17,4],[28,7,17,5,"VISITED_ROUTE_KEYS"],[28,25,17,23],[28,28,17,26,"visitedRouteKeys"],[29,4,18,2],[29,5,18,3],[30,4,19,2],[30,9,19,7],[30,13,19,13,"route"],[30,18,19,18],[30,22,19,22,"removedRoutes"],[30,35,19,35],[30,37,19,37],[31,6,20,4],[31,10,20,8,"visitedRouteKeys"],[31,26,20,24],[31,27,20,25,"has"],[31,30,20,28],[31,31,20,29,"route"],[31,36,20,34],[31,37,20,35,"key"],[31,40,20,38],[31,41,20,39],[31,43,20,41],[32,8,21,6],[33,8,22,6],[34,6,23,4],[36,6,25,4],[37,6,26,4],[37,10,26,10,"isPrevented"],[37,21,26,21],[37,24,26,24,"beforeRemoveListeners"],[37,45,26,45],[37,46,26,46,"route"],[37,51,26,51],[37,52,26,52,"key"],[37,55,26,55],[37,56,26,56],[37,59,26,59,"beforeRemoveAction"],[37,77,26,77],[37,78,26,78],[38,6,27,4],[38,10,27,8,"isPrevented"],[38,21,27,19],[38,23,27,21],[39,8,28,6],[39,15,28,13],[39,19,28,17],[40,6,29,4],[41,6,30,4,"visitedRouteKeys"],[41,22,30,20],[41,23,30,21,"add"],[41,26,30,24],[41,27,30,25,"route"],[41,32,30,30],[41,33,30,31,"key"],[41,36,30,34],[41,37,30,35],[42,6,31,4],[42,10,31,10,"event"],[42,15,31,15],[42,18,31,18,"emitter"],[42,25,31,25],[42,26,31,26,"emit"],[42,30,31,30],[42,31,31,31],[43,8,32,6,"type"],[43,12,32,10],[43,14,32,12],[43,28,32,26],[44,8,33,6,"target"],[44,14,33,12],[44,16,33,14,"route"],[44,21,33,19],[44,22,33,20,"key"],[44,25,33,23],[45,8,34,6,"data"],[45,12,34,10],[45,14,34,12],[46,10,35,8,"action"],[46,16,35,14],[46,18,35,16,"beforeRemoveAction"],[47,8,36,6],[47,9,36,7],[48,8,37,6,"canPreventDefault"],[48,25,37,23],[48,27,37,25],[49,6,38,4],[49,7,38,5],[49,8,38,6],[50,6,39,4],[50,10,39,8,"event"],[50,15,39,13],[50,16,39,14,"defaultPrevented"],[50,32,39,30],[50,34,39,32],[51,8,40,6],[51,15,40,13],[51,19,40,17],[52,6,41,4],[53,4,42,2],[54,4,43,2],[54,11,43,9],[54,16,43,14],[55,2,44,0],[55,3,44,1],[56,2,44,2,"exports"],[56,9,44,2],[56,10,44,2,"shouldPreventRemove"],[56,29,44,2],[56,32,44,2,"shouldPreventRemove"],[56,51,44,2],[57,2,45,7],[57,11,45,16,"useOnPreventRemove"],[57,29,45,34,"useOnPreventRemove"],[57,30,45,34,"_ref"],[57,34,45,34],[57,36,49,3],[58,4,49,3],[58,8,46,2,"getState"],[58,16,46,10],[58,19,46,10,"_ref"],[58,23,46,10],[58,24,46,2,"getState"],[58,32,46,10],[59,6,47,2,"emitter"],[59,13,47,9],[59,16,47,9,"_ref"],[59,20,47,9],[59,21,47,2,"emitter"],[59,28,47,9],[60,6,48,2,"beforeRemoveListeners"],[60,27,48,23],[60,30,48,23,"_ref"],[60,34,48,23],[60,35,48,2,"beforeRemoveListeners"],[60,56,48,23],[61,4,50,2],[61,8,50,2,"_React$useContext"],[61,25,50,2],[61,28,52,6,"React"],[61,33,52,11],[61,34,52,12,"useContext"],[61,44,52,22],[61,45,52,23,"NavigationBuilderContext"],[61,95,52,47],[61,96,52,48],[62,6,51,4,"addKeyedListener"],[62,22,51,20],[62,25,51,20,"_React$useContext"],[62,42,51,20],[62,43,51,4,"addKeyedListener"],[62,59,51,20],[63,4,53,2],[63,8,53,8,"route"],[63,13,53,13],[63,16,53,16,"React"],[63,21,53,21],[63,22,53,22,"useContext"],[63,32,53,32],[63,33,53,33,"NavigationRouteContext"],[63,79,53,55],[63,80,53,56],[64,4,54,2],[64,8,54,8,"routeKey"],[64,16,54,16],[64,19,54,19,"route"],[64,24,54,24],[64,26,54,26,"key"],[64,29,54,29],[65,4,55,2,"React"],[65,9,55,7],[65,10,55,8,"useEffect"],[65,19,55,17],[65,20,55,18],[65,32,55,24],[66,6,56,4],[66,10,56,8,"routeKey"],[66,18,56,16],[66,20,56,18],[67,8,57,6],[67,15,57,13,"addKeyedListener"],[67,31,57,29],[67,34,57,32],[67,48,57,46],[67,50,57,48,"routeKey"],[67,58,57,56],[67,60,57,58],[67,70,57,58,"action"],[67,76,57,64],[67,78,57,68],[68,10,58,8],[68,14,58,14,"state"],[68,19,58,19],[68,22,58,22,"getState"],[68,30,58,30],[68,31,58,31],[68,32,58,32],[69,10,59,8],[69,17,59,15,"shouldPreventRemove"],[69,36,59,34],[69,37,59,35,"emitter"],[69,44,59,42],[69,46,59,44,"beforeRemoveListeners"],[69,67,59,65],[69,69,59,67,"state"],[69,74,59,72],[69,75,59,73,"routes"],[69,81,59,79],[69,83,59,81],[69,85,59,83],[69,87,59,85,"action"],[69,93,59,91],[69,94,59,92],[70,8,60,6],[70,9,60,7],[70,10,60,8],[71,6,61,4],[72,4,62,2],[72,5,62,3],[72,7,62,5],[72,8,62,6,"addKeyedListener"],[72,24,62,22],[72,26,62,24,"beforeRemoveListeners"],[72,47,62,45],[72,49,62,47,"emitter"],[72,56,62,54],[72,58,62,56,"getState"],[72,66,62,64],[72,68,62,66,"routeKey"],[72,76,62,74],[72,77,62,75],[72,78,62,76],[73,2,63,0],[74,0,63,1]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCM;uCCC,kBD;6CEG,2CF;CDiC;OIC;kBCU;0DCE;ODG;GDE;CJC"}},"type":"js/module"}]}