{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":16,"index":93},"end":{"line":3,"column":32,"index":109}}],"key":"vm88vOsSPZItrLOmMEyUuGkd1y4=","exportNames":["*"],"imports":1}},{"name":"./PostgrestQueryBuilder","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":56,"index":167},"end":{"line":4,"column":90,"index":201}}],"key":"6yLSRkTCaGyTSQvLUJvo14aYbi8=","exportNames":["*"],"imports":1}},{"name":"./PostgrestFilterBuilder","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":57,"index":261},"end":{"line":5,"column":92,"index":296}}],"key":"NGvdEkdD+wH/sBHVGxr/LfyZvLA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  const tslib_1 = require(_dependencyMap[0], \"tslib\");\n  const PostgrestQueryBuilder_1 = tslib_1.__importDefault(require(_dependencyMap[1], \"./PostgrestQueryBuilder\"));\n  const PostgrestFilterBuilder_1 = tslib_1.__importDefault(require(_dependencyMap[2], \"./PostgrestFilterBuilder\"));\n  /**\n   * PostgREST client.\n   *\n   * @typeParam Database - Types for the schema from the [type\n   * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n   *\n   * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n   * literal, the same one passed to the constructor. If the schema is not\n   * `\"public\"`, this must be supplied manually.\n   */\n  class PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     * @example\n     * ```ts\n     * import PostgrestClient from '@supabase/postgrest-js'\n     *\n     * const postgrest = new PostgrestClient('https://xyzcompany.supabase.co/rest/v1', {\n     *   headers: { apikey: 'public-anon-key' },\n     *   schema: 'public',\n     * })\n     * ```\n     */\n    constructor(url, {\n      headers = {},\n      schema,\n      fetch\n    } = {}) {\n      this.url = url;\n      this.headers = new Headers(headers);\n      this.schemaName = schema;\n      this.fetch = fetch;\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n      if (!relation || typeof relation !== 'string' || relation.trim() === '') {\n        throw new Error('Invalid relation name: relation must be a non-empty string.');\n      }\n      const url = new URL(`${this.url}/${relation}`);\n      return new PostgrestQueryBuilder_1.default(url, {\n        headers: new Headers(this.headers),\n        schema: this.schemaName,\n        fetch: this.fetch\n      });\n    }\n    /**\n     * Select a schema to query or perform an function (rpc) call.\n     *\n     * The schema needs to be on the list of exposed schemas inside Supabase.\n     *\n     * @param schema - The schema to query\n     */\n    schema(schema) {\n      return new PostgrestClient(this.url, {\n        headers: this.headers,\n        schema,\n        fetch: this.fetch\n      });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.get - When set to `true`, the function will be called with\n     * read-only access mode.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, {\n      head = false,\n      get = false,\n      count\n    } = {}) {\n      var _a;\n      let method;\n      const url = new URL(`${this.url}/rpc/${fn}`);\n      let body;\n      if (head || get) {\n        method = head ? 'HEAD' : 'GET';\n        Object.entries(args)\n        // params with undefined value needs to be filtered out, otherwise it'll\n        // show up as `?param=undefined`\n        .filter(([_, value]) => value !== undefined)\n        // array values need special syntax\n        .map(([name, value]) => [name, Array.isArray(value) ? `{${value.join(',')}}` : `${value}`]).forEach(([name, value]) => {\n          url.searchParams.append(name, value);\n        });\n      } else {\n        method = 'POST';\n        body = args;\n      }\n      const headers = new Headers(this.headers);\n      if (count) {\n        headers.set('Prefer', `count=${count}`);\n      }\n      return new PostgrestFilterBuilder_1.default({\n        method,\n        url,\n        headers,\n        schema: this.schemaName,\n        body,\n        fetch: (_a = this.fetch) !== null && _a !== void 0 ? _a : fetch\n      });\n    }\n  }\n  exports.default = PostgrestClient;\n});","lineCount":141,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0],[7,8,3,6,"tslib_1"],[7,15,3,13],[7,18,3,16,"require"],[7,25,3,23],[7,26,3,23,"_dependencyMap"],[7,40,3,23],[7,52,3,31],[7,53,3,32],[8,2,4,0],[8,8,4,6,"PostgrestQueryBuilder_1"],[8,31,4,29],[8,34,4,32,"tslib_1"],[8,41,4,39],[8,42,4,40,"__importDefault"],[8,57,4,55],[8,58,4,56,"require"],[8,65,4,63],[8,66,4,63,"_dependencyMap"],[8,80,4,63],[8,110,4,89],[8,111,4,90],[8,112,4,91],[9,2,5,0],[9,8,5,6,"PostgrestFilterBuilder_1"],[9,32,5,30],[9,35,5,33,"tslib_1"],[9,42,5,40],[9,43,5,41,"__importDefault"],[9,58,5,56],[9,59,5,57,"require"],[9,66,5,64],[9,67,5,64,"_dependencyMap"],[9,81,5,64],[9,112,5,91],[9,113,5,92],[9,114,5,93],[10,2,6,0],[11,0,7,0],[12,0,8,0],[13,0,9,0],[14,0,10,0],[15,0,11,0],[16,0,12,0],[17,0,13,0],[18,0,14,0],[19,0,15,0],[20,2,16,0],[20,8,16,6,"PostgrestClient"],[20,23,16,21],[20,24,16,22],[21,4,17,4],[22,4,18,4],[23,0,19,0],[24,0,20,0],[25,0,21,0],[26,0,22,0],[27,0,23,0],[28,0,24,0],[29,0,25,0],[30,0,26,0],[31,0,27,0],[32,0,28,0],[33,0,29,0],[34,0,30,0],[35,0,31,0],[36,0,32,0],[37,0,33,0],[38,0,34,0],[39,0,35,0],[40,4,36,4,"constructor"],[40,15,36,15,"constructor"],[40,16,36,16,"url"],[40,19,36,19],[40,21,36,21],[41,6,36,23,"headers"],[41,13,36,30],[41,16,36,33],[41,17,36,34],[41,18,36,35],[42,6,36,37,"schema"],[42,12,36,43],[43,6,36,45,"fetch"],[44,4,36,52],[44,5,36,53],[44,8,36,56],[44,9,36,57],[44,10,36,58],[44,12,36,60],[45,6,37,8],[45,10,37,12],[45,11,37,13,"url"],[45,14,37,16],[45,17,37,19,"url"],[45,20,37,22],[46,6,38,8],[46,10,38,12],[46,11,38,13,"headers"],[46,18,38,20],[46,21,38,23],[46,25,38,27,"Headers"],[46,32,38,34],[46,33,38,35,"headers"],[46,40,38,42],[46,41,38,43],[47,6,39,8],[47,10,39,12],[47,11,39,13,"schemaName"],[47,21,39,23],[47,24,39,26,"schema"],[47,30,39,32],[48,6,40,8],[48,10,40,12],[48,11,40,13,"fetch"],[48,16,40,18],[48,19,40,21,"fetch"],[48,24,40,26],[49,4,41,4],[50,4,42,4],[51,0,43,0],[52,0,44,0],[53,0,45,0],[54,0,46,0],[55,4,47,4,"from"],[55,8,47,8,"from"],[55,9,47,9,"relation"],[55,17,47,17],[55,19,47,19],[56,6,48,8],[56,10,48,12],[56,11,48,13,"relation"],[56,19,48,21],[56,23,48,25],[56,30,48,32,"relation"],[56,38,48,40],[56,43,48,45],[56,51,48,53],[56,55,48,57,"relation"],[56,63,48,65],[56,64,48,66,"trim"],[56,68,48,70],[56,69,48,71],[56,70,48,72],[56,75,48,77],[56,77,48,79],[56,79,48,81],[57,8,49,12],[57,14,49,18],[57,18,49,22,"Error"],[57,23,49,27],[57,24,49,28],[57,85,49,89],[57,86,49,90],[58,6,50,8],[59,6,51,8],[59,12,51,14,"url"],[59,15,51,17],[59,18,51,20],[59,22,51,24,"URL"],[59,25,51,27],[59,26,51,28],[59,29,51,31],[59,33,51,35],[59,34,51,36,"url"],[59,37,51,39],[59,41,51,43,"relation"],[59,49,51,51],[59,51,51,53],[59,52,51,54],[60,6,52,8],[60,13,52,15],[60,17,52,19,"PostgrestQueryBuilder_1"],[60,40,52,42],[60,41,52,43,"default"],[60,48,52,50],[60,49,52,51,"url"],[60,52,52,54],[60,54,52,56],[61,8,53,12,"headers"],[61,15,53,19],[61,17,53,21],[61,21,53,25,"Headers"],[61,28,53,32],[61,29,53,33],[61,33,53,37],[61,34,53,38,"headers"],[61,41,53,45],[61,42,53,46],[62,8,54,12,"schema"],[62,14,54,18],[62,16,54,20],[62,20,54,24],[62,21,54,25,"schemaName"],[62,31,54,35],[63,8,55,12,"fetch"],[63,13,55,17],[63,15,55,19],[63,19,55,23],[63,20,55,24,"fetch"],[64,6,56,8],[64,7,56,9],[64,8,56,10],[65,4,57,4],[66,4,58,4],[67,0,59,0],[68,0,60,0],[69,0,61,0],[70,0,62,0],[71,0,63,0],[72,0,64,0],[73,4,65,4,"schema"],[73,10,65,10,"schema"],[73,11,65,11,"schema"],[73,17,65,17],[73,19,65,19],[74,6,66,8],[74,13,66,15],[74,17,66,19,"PostgrestClient"],[74,32,66,34],[74,33,66,35],[74,37,66,39],[74,38,66,40,"url"],[74,41,66,43],[74,43,66,45],[75,8,67,12,"headers"],[75,15,67,19],[75,17,67,21],[75,21,67,25],[75,22,67,26,"headers"],[75,29,67,33],[76,8,68,12,"schema"],[76,14,68,18],[77,8,69,12,"fetch"],[77,13,69,17],[77,15,69,19],[77,19,69,23],[77,20,69,24,"fetch"],[78,6,70,8],[78,7,70,9],[78,8,70,10],[79,4,71,4],[80,4,72,4],[81,0,73,0],[82,0,74,0],[83,0,75,0],[84,0,76,0],[85,0,77,0],[86,0,78,0],[87,0,79,0],[88,0,80,0],[89,0,81,0],[90,0,82,0],[91,0,83,0],[92,0,84,0],[93,0,85,0],[94,0,86,0],[95,0,87,0],[96,0,88,0],[97,0,89,0],[98,0,90,0],[99,0,91,0],[100,0,92,0],[101,0,93,0],[102,0,94,0],[103,4,95,4,"rpc"],[103,7,95,7,"rpc"],[103,8,95,8,"fn"],[103,10,95,10],[103,12,95,12,"args"],[103,16,95,16],[103,19,95,19],[103,20,95,20],[103,21,95,21],[103,23,95,23],[104,6,95,25,"head"],[104,10,95,29],[104,13,95,32],[104,18,95,37],[105,6,95,39,"get"],[105,9,95,42],[105,12,95,45],[105,17,95,50],[106,6,95,52,"count"],[107,4,95,59],[107,5,95,60],[107,8,95,63],[107,9,95,64],[107,10,95,65],[107,12,95,67],[108,6,96,8],[108,10,96,12,"_a"],[108,12,96,14],[109,6,97,8],[109,10,97,12,"method"],[109,16,97,18],[110,6,98,8],[110,12,98,14,"url"],[110,15,98,17],[110,18,98,20],[110,22,98,24,"URL"],[110,25,98,27],[110,26,98,28],[110,29,98,31],[110,33,98,35],[110,34,98,36,"url"],[110,37,98,39],[110,45,98,47,"fn"],[110,47,98,49],[110,49,98,51],[110,50,98,52],[111,6,99,8],[111,10,99,12,"body"],[111,14,99,16],[112,6,100,8],[112,10,100,12,"head"],[112,14,100,16],[112,18,100,20,"get"],[112,21,100,23],[112,23,100,25],[113,8,101,12,"method"],[113,14,101,18],[113,17,101,21,"head"],[113,21,101,25],[113,24,101,28],[113,30,101,34],[113,33,101,37],[113,38,101,42],[114,8,102,12,"Object"],[114,14,102,18],[114,15,102,19,"entries"],[114,22,102,26],[114,23,102,27,"args"],[114,27,102,31],[115,8,103,16],[116,8,104,16],[117,8,104,16],[117,9,105,17,"filter"],[117,15,105,23],[117,16,105,24],[117,17,105,25],[117,18,105,26,"_"],[117,19,105,27],[117,21,105,29,"value"],[117,26,105,34],[117,27,105,35],[117,32,105,40,"value"],[117,37,105,45],[117,42,105,50,"undefined"],[117,51,105,59],[118,8,106,16],[119,8,106,16],[119,9,107,17,"map"],[119,12,107,20],[119,13,107,21],[119,14,107,22],[119,15,107,23,"name"],[119,19,107,27],[119,21,107,29,"value"],[119,26,107,34],[119,27,107,35],[119,32,107,40],[119,33,107,41,"name"],[119,37,107,45],[119,39,107,47,"Array"],[119,44,107,52],[119,45,107,53,"isArray"],[119,52,107,60],[119,53,107,61,"value"],[119,58,107,66],[119,59,107,67],[119,62,107,70],[119,66,107,74,"value"],[119,71,107,79],[119,72,107,80,"join"],[119,76,107,84],[119,77,107,85],[119,80,107,88],[119,81,107,89],[119,84,107,92],[119,87,107,95],[119,90,107,98,"value"],[119,95,107,103],[119,97,107,105],[119,98,107,106],[119,99,107,107],[119,100,108,17,"forEach"],[119,107,108,24],[119,108,108,25],[119,109,108,26],[119,110,108,27,"name"],[119,114,108,31],[119,116,108,33,"value"],[119,121,108,38],[119,122,108,39],[119,127,108,44],[120,10,109,16,"url"],[120,13,109,19],[120,14,109,20,"searchParams"],[120,26,109,32],[120,27,109,33,"append"],[120,33,109,39],[120,34,109,40,"name"],[120,38,109,44],[120,40,109,46,"value"],[120,45,109,51],[120,46,109,52],[121,8,110,12],[121,9,110,13],[121,10,110,14],[122,6,111,8],[122,7,111,9],[122,13,112,13],[123,8,113,12,"method"],[123,14,113,18],[123,17,113,21],[123,23,113,27],[124,8,114,12,"body"],[124,12,114,16],[124,15,114,19,"args"],[124,19,114,23],[125,6,115,8],[126,6,116,8],[126,12,116,14,"headers"],[126,19,116,21],[126,22,116,24],[126,26,116,28,"Headers"],[126,33,116,35],[126,34,116,36],[126,38,116,40],[126,39,116,41,"headers"],[126,46,116,48],[126,47,116,49],[127,6,117,8],[127,10,117,12,"count"],[127,15,117,17],[127,17,117,19],[128,8,118,12,"headers"],[128,15,118,19],[128,16,118,20,"set"],[128,19,118,23],[128,20,118,24],[128,28,118,32],[128,30,118,34],[128,39,118,43,"count"],[128,44,118,48],[128,46,118,50],[128,47,118,51],[129,6,119,8],[130,6,120,8],[130,13,120,15],[130,17,120,19,"PostgrestFilterBuilder_1"],[130,41,120,43],[130,42,120,44,"default"],[130,49,120,51],[130,50,120,52],[131,8,121,12,"method"],[131,14,121,18],[132,8,122,12,"url"],[132,11,122,15],[133,8,123,12,"headers"],[133,15,123,19],[134,8,124,12,"schema"],[134,14,124,18],[134,16,124,20],[134,20,124,24],[134,21,124,25,"schemaName"],[134,31,124,35],[135,8,125,12,"body"],[135,12,125,16],[136,8,126,12,"fetch"],[136,13,126,17],[136,15,126,19],[136,16,126,20,"_a"],[136,18,126,22],[136,21,126,25],[136,25,126,29],[136,26,126,30,"fetch"],[136,31,126,35],[136,37,126,41],[136,41,126,45],[136,45,126,49,"_a"],[136,47,126,51],[136,52,126,56],[136,57,126,61],[136,58,126,62],[136,61,126,65,"_a"],[136,63,126,67],[136,66,126,70,"fetch"],[137,6,127,8],[137,7,127,9],[137,8,127,10],[138,4,128,4],[139,2,129,0],[140,2,130,0,"exports"],[140,9,130,7],[140,10,130,8,"default"],[140,17,130,15],[140,20,130,18,"PostgrestClient"],[140,35,130,33],[141,0,130,34],[141,3]],"functionMap":{"names":["<global>","PostgrestClient","constructor","from","schema","rpc","Object.entries.filter$argument_0","Object.entries.filter.map$argument_0","Object.entries.filter.map.forEach$argument_0"],"mappings":"AAA;ACe;ICoB;KDK;IEM;KFU;IGQ;KHM;IIwB;wBCU,mCD;qBEE,qFF;yBGC;aHE;KJkB;CDC"},"hasCjsExports":true},"type":"js/module"}]}